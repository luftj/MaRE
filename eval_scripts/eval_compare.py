maps=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"]
wm_km_sc_aff=[2.72,11.61,11.74,4.42,4.47,7.55,3.81,3.44,4.29,40.91,6.71,3.13,3.55,7.16,6.98,7.99,2.40,2.48,2.37,2.68]
wm_px_sc_aff=[66.5,94.6,89.8,49.0,38.7,74.8,37.2,33.5,43.5,63.6,40.0,46.1,41.7,64.1,60.7,52.8,27.5,35.5,27.7,29.0]

results_sorted = sorted(zip(maps,wm_km_sc_aff), key=lambda tup: tup[1])
sheet_names_sorted = [x[0] for x in results_sorted]
error_sorted = [x[1] for x in results_sorted]

median_error = error_sorted[len(error_sorted)//2]
mean_error = sum(wm_km_sc_aff)/len(wm_km_sc_aff)
print("other median km",median_error)
print("other mean km",mean_error)

results_sorted = sorted(zip(maps,wm_px_sc_aff), key=lambda tup: tup[1])
sheet_names_sorted = [x[0] for x in results_sorted]
error_sorted = [x[1] for x in results_sorted]

median_error = error_sorted[len(error_sorted)//2]
mean_error = sum(wm_px_sc_aff)/len(wm_px_sc_aff)
print("other affine median px",median_error)
print("other affine mean px",mean_error)

import matplotlib.pyplot as plt
sheet_names = ["529",#"12",
                "1-2",
                "3","4","5",
                "6","7","8","9","10-18",
                "11",#"79a",
                "168","173","259",
                "327","328","329","330","331",
                "332","333","352","353","354",
                "355","356","357","358","377",
                "378","379","381","382","383",
                "402","403","404","405","406",
                "407","408","428","429","430",
                "431","432","433","434","571",
                "572","581","602"]
#["529","12","3","4","5","6","7","8","9","10","11","79a","168","173","259","327","328","382","383"]
error_ours = [127.425356,  808.127598, 405.070386, 349.664682, 509.326544, 
                 1977.204952, 499.567129, 333.353408, 114.199929, 347.203024, 
                 164.871981, # 18179.592263, 
                 191.158490,  75.028294, 52.330538, 
                 102.093746,  121.107682,  2067.600979, 92.453029, 1543.557139, 
                 91.655742,   51.111890,   129.926327, 87.675772, 171.246463, 
                 61.944273,   77.858277,   58.707810, 275.575773, 107.694777, 
                 1601.318240, 84.639471,   126.455419, 87.476919, 119.161954, 
                 1690.922109, 1239.491436, 62.393875, 126.555694, 99.391196, 
                 77.121876,   100.562299,  140.500505, 89.768985, 69.173359, 
                 64.417055,   73.200442,   83.135307, 64.073825, 1424.003588, 
                 85.241935,   82.453438,   73.992250]

new_results = {"529":(143.55,148.26),
"1-2": (535.75,610.86), "12": (3184.05,3208.3),"3":  (391.64,485.25),"4":  (363.67,445.65),"5":  (485.95,503.54),"6":  (1191.86,1285.39),"7":  (526.78,608.89),"8":  (329.72,421.54),"9":  (104.45,121.04),"10-18":(341.94,387.76),"11":(163.41,193.17),"168":(191.5,192.36),"173":(73.3,80.31),"259":(63.23,64.51),"327":(100.85,113.16),"328":(105.5,114.76),"329":(56.93,69.68),"330":(102.7,106.08),"331":(67.73,85.15),"332":(91.69,93.92),"333":(56.27,59.28),"352":(110.07,113.31),"353":(79.97,93.55),"354":(95.48,98.5),"355":(62.32,71.97),"356":(85,87.49),"357":(72,79.55),"358":(72.95,84.93),"377":(119.37,122.2),"378":(79.77,92.56),"379":(77.18,83.6),"380":(55.3,62.72),"381":(130.13,131.55),"382":(88.28,100.84),"383":(86.49,101.92),"402":(83.91,102.94),"403":(144.63,149.2),"404":(66.12,78.19),"405":(128.69,133.24),"406":(109.43,113.33),"407":(75.43,86.01),"408":(103.36,114.02),"428":(95.41,104.97),"429":(70.79,76.8),"430":(66.66,71.19),"431":(58.29,58.93),"432":(71.71,76.09),"433":(60.73,64.74),"434":(65.08,67.98),"571":(66.99,84.34),"572":(1254.38,1581.08),"581":(87.39,99.13),"602":(78.21,80)}

new_homog = {"529": (168.67, 181.42), 
"1-2": (1916.25, 2563.05), "3": (1257.18, 1492.01),  "4": (741.69, 1093.49),  "5": (843.21, 869.30),  "6": (1624.89, 2119.58),  "7": (439.35, 458.39),  "8": (839.46, 953.85),  "9": (135.50, 140.65),"10-18": (215.75, 235.44), "11": (367.01, 387.77),"168": (203.52, 206.23),"173": (56.83, 60.71),"259": (47.71, 51.69),"327": (106.25, 113.62),"328": (119.27, 123.11),"329": (54.55, 54.91),"330": (102.06, 111.59),"331": (61.10, 65.03),"332": (113.46, 119.36),"333": (47.75, 49.46),"352": (161.69, 178.04),"353": (72.50, 84.42),"354": (92.91, 97.81),"355": (59.28, 73.33),"356": (81.39, 84.54),"357": (63.24, 71.14),"358": (63.85, 69.66),"377": (128.39, 140.10),"378": (81.66, 86.22),"379": (77.04, 85.00),"380": (52.64, 53.05),"381": (132.91, 139.73),"382": (65.31, 66.22),"383": (59.10, 62.93),"402": (60.43, 65.85),"403": (137.62, 145.11),"404": (69.16, 81.30),"405": (132.20, 143.80),"406": (110.70, 115.41),"407": (80.77, 81.94),"408": (96.27, 106.05),"428": (105.32, 111.02),"429": (64.43, 70.29),"430": (53.83, 57.84),"431": (38.95, 40.02),"432": (69.63, 75.37),"433": (59.38, 72.95),"434": (59.99, 63.91),"571": (955.03, 1233.00),"572": (162.94, 168.37),"581": (1038.49, 1277.13),"602": (1069.57, 1533.29)}

# error_ours = [new_results[x][0] for x in sheet_names] # MAE
error_ours = [new_results[x][1] for x in sheet_names] # RMSE
error_homog = [new_homog[x][1] for x in sheet_names] # RMSE


# errers_homography = {"529":94.565485,"12":707.172848,"3":1415.640065,"4":653.076558,"5":1006.338390,"6":2420.441656,"7":464.467480,"8":832.661051,"9":151.933902,
# "10-18":378,"11":383.828872,"79a":24948.190689,"168":199.346165,"173":61.019486,"259":55.052516,"327":101.565729,"328":152.072666,"329":1974.843301,"330":181.804898,
# "331":1879.637310,"332":164.339525,"333":114.531532,"352":292.974791,"353":96.665152,"354":121.666220,"355":79.816886,"356":130.483743,"357":57.380114,"358":292.208575,
# "377":99.572036,"378":71.533923,"379":87.841745,"380":50.308258,"381":150.648295,"382":59.609603,"383":196.396860,"402":2070.228011,"403":229.837931,"404":66.206888,
# "405":133.270741,"406":108.430550,"407":79.191592,"408":216.673433,"428":131.314116,"429":1130,"430":69.618423,"431":47.400478,"432":75.761663,"433":68.065370,
# "434":1120.302031,"571":1144.550734,"572":223.555789,"581":45.933109,"602":64.762433}
# error_homog = [errers_homography[x] for x in sheet_names]
error_homog_px = [x/6.4 for x in error_homog]
error_ours_px = [x/6.4 for x in error_ours]
print(error_ours_px)
print("ours median px",sorted(error_ours_px)[len(sorted(error_ours_px))//2])
print("ours mean px", sum(error_ours_px)/len(error_ours_px))
weinman_sc_tps=[61.3,93.3,81.8,33.8,32.5,74.5,34.0,29.4,42.8,56.7,41.9,50.5,53.1,51.4,43.1,59.8,27.7,26.5,26.2,27.8]
plt.boxplot([error_sorted,weinman_sc_tps,error_homog_px,error_ours_px], vert=False, showmeans=True, medianprops={"color":"r"})
plt.scatter([],[], c="g", marker="^", label="mean")
plt.axhline(0, xmax=0, c="r", label="median")
plt.xlabel("georeferencing RMSE [px]")
plt.yticks([1,2,3,4],["Howe et al. (affine)","Howe et al. (TPS)","ours (homography)","ours (affine)"])
# plt.xticks(range(len(sheet_names_sorted)),sheet_names_sorted,rotation=-90)
plt.legend()
plt.show()